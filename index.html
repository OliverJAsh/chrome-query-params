<script src="elm.js"></script>
<!-- <script src="/_reactor/debug.js"></script> -->
<body>
    <script>
        // Only works without ports
        // var main = Elm.fullscreenDebug('Main', 'Main.elm');
        // https://github.com/elm-lang/elm-reactor/issues/36
        const main = Elm.fullscreen(Elm.Main, { inputQueryParamsStr: window.location.search
            .replace(/^\?/, '') });

        main.ports.outputModel.subscribe(model => console.log(model));
        main.ports.focus.subscribe(focus => {
            if (focus) {
                // TODO: Why 50? rAF and 1 don't work
                setTimeout(() => {
                    const nodes = document.querySelectorAll('tbody tr');
                    const node = nodes[focus[0]];
                    node.querySelector(`.${focus[1]}`).focus();
                }, 50);
            }
        });
    </script>
</body>
